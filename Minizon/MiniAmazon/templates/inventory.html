{% extends 'base.html' %}

{% block title %}
    Inventory

{% endblock %}

{% block content %}
<div class="container">
    <form method="POST" class="form-query" style="color:black" enctype="multipart/form-data">
        {{ form.hidden_tag() }}
    <div class="d-flex justify-content-center">
        <div class="p-2 bd-highlight">
            <div class="d-flex flex-row">
                <h4 class="ml-7 mr-3">Search: </h4>
                {{ form.search(class="form-control") }}
                {{ form.submit(class="btn btn-lg btn-block btn-primary ml-3 p-0") }}
            </div>
        </div>
    </div>
    </form>
<hr/>
    <div class="d-flex flex-row-reverse bd-highlight">
        <a class="btn btn-outline btn-info mb-3" href="{{ url_for('market_page') }}">Find New Item</a>
    </div>
<table class="table table-hover table-striped table-sm">
    <thead class="thead-dark">
    <tr>
        <th scope="col">Name</th>
        <th scope="col">Price</th>
        <th scope="col">Quantity</th>
        <th scope="col">Options</th>
    </tr>
    </thead>
    <tbody>
    <!-- Your rows inside the table HERE: -->
    {%  if inventory %}
    {% for item in inventory %}
        <tr>
            <td><h5 class="mt-4">{{ item.item.name }}</h5></td>
            <td><h5 class="mt-4">${{ item.price }}</h5></td>
            <td><h5 class="mt-4">{{ item.quantity }}</h5></td>
            <td>
                <div class="mt-3">
                <a class="btn btn-outline btn-info mt-2 mb-2" href="{{ url_for('item_info_page', id=item.item.id) }}">More Info</a>
                <a class="btn btn-outline btn-success mt-2 mb-2" href="{{ url_for('inventory_edit_page', id=item.item.id) }}">Edit</a>
                </div>
            </td>
        </tr>
    {% endfor %}
    {% endif %}
    </tbody>
</table>
    <div style = "text-align:center;">
        <canvas id="lineChart" width="900" height="400"></canvas>
    </div>
</div>
<script>
    var ctx = document.getElementById("lineChart").getContext("2d");
    var lineChart = new Chart(ctx,{
        type:"bar",
        data: {
            labels: {{ labels | safe}},
            datasets: [
             {
               label: "Data points",
               data: {{values | safe}},
               fill: false,
               borderColor: "rgb(75, 192, 192)",
               borderWidth: 1
             }
            ]
        },
        options:{
            responsive: false
        }
    }
    );
</script>

{% endblock %}
