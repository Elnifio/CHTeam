{% extends 'base.html' %}

{% block title %}
    sell_history
{% endblock %}

{% block content %}
<div class="container">
    <form method="POST" class="form-query" style="color:black" enctype="multipart/form-data">
        {{ form.hidden_tag() }}
    <div class="d-flex justify-content-center">
        <div class="p-2 bd-highlight">
            <div class="d-flex flex-row">
                <h4 class="ml-7 mr-3">Sort: </h4>
                {{ form.sort_by(class="form-control") }}
            </div>
        </div>
        <div class="p-2 bd-highlight">
            <div class="d-flex flex-row">
                <h4 class="ml-7 mr-3">Order: </h4>
                {{ form.order_by(class="form-control") }}
            </div>
        </div>
        <div class="p-2 bd-highlight">
            <div class="d-flex flex-row">
                {{ form.submit(class="btn btn-lg btn-block btn-primary ml-3 p-0") }}
            </div>
        </div>
    </div>
    </form>
<hr/>
<table class="table table-hover table-striped table-sm">
    <thead class="thead-dark">
    <tr>
        <th scope="col">Order_id</th>
        <th scope="col">Buyer ID</th>
        <th scope="col">Address</th>
        <th scope="col">Item name</th>
        <th scope="col">Order Date</th>
        <th scope="col">Number</th>
        <th scope="col">Price</th>
        <th scope="col">Status</th>
        <th scope="col">Options</th>
    </tr>
    </thead>
    <tbody>
    <!-- Your rows inside the table HERE: -->
    {%  if sell_order %}
    {% for order in sell_order %}
        <tr>
            <td><h5 class="mt-4">{{ order.order_id }}</h5></td>
            <td><h5 class="mt-4">{{ order.order.buyer_id }}</h5></td>
            <td><h5 class="mt-4">{{ order.order.address }}</h5></td>
            <td><h5 class="mt-4">{{ order.item.name }}</h5></td>
            <td><h5 class="mt-4">{{ order.order.Date }}</h5></td>
            <td><h5 class="mt-4">{{ order.quantity }}</h5></td>
            <td><h5 class="mt-4">{{ order.price }}</h5></td>
            <td><h5 class="mt-4">{{ order.fulfill }}</h5></td>
            <td>
                <div class="mt-3">
                <a class="btn btn-outline btn-info mt-2 mb-2" href="{{ url_for('fulfill', order_id=order.order_id, item_id=order.item_id) }}">Fulfill</a>
                <a class="btn btn-outline btn-info mt-2 mb-2" href="{{ url_for('public_profile_page', id=order.order.buyer_id) }}">Buyer Info</a>
                </div>
            </td>
        </tr>
    {% endfor %}
    {% endif %}
    </tbody>
</table>
</div>
</div>
<div style = "text-align:center;">
    <canvas id="lineChart" width="900" height="400"></canvas>
</div>
<script>
    var ctx = document.getElementById("lineChart").getContext("2d");
    var lineChart = new Chart(ctx,{
        type:"line",
        data: {
            labels: {{ labels | safe}},
            datasets: [
             {
               label: "Data points",
               data: {{values | safe}},
               fill: false,
               borderColor: "rgb(75, 192, 192)",
               blineTension: 0.1
             }
            ]
        },
        options:{
            responsive: false
        }
    }
    );
</script>
{% endblock %}
