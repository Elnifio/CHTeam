{% extends 'base.html' %}

{% block title %}
    Market
{% endblock %}

{% block content %}

<!-- Table for Displaying Bars-->
<div class="container">
    <form method="POST" class="form-query" style="color:black" enctype="multipart/form-data">
        {{ form.hidden_tag() }}
    <div class="d-flex justify-content-center">
        <div class="p-2 bd-highlight">
            <div class="d-flex flex-row">
                <h4 class="mr-3">Category: </h4>
                {{ form.category(class="form-control") }}
            </div>
        </div>
        <div class="p-2 bd-highlight">
            <div class="d-flex flex-row">
                <h4 class="ml-7 mr-3">Sort: </h4>
                {{ form.sort_by(class="form-control") }}
            </div>
        </div>
        <div class="p-2 bd-highlight">
            <div class="d-flex flex-row">
                <h4 class="ml-7 mr-3">Order: </h4>
                {{ form.order_by(class="form-control") }}
            </div>
        </div>
        <div class="p-2 bd-highlight">
            <div class="d-flex flex-row">
                <h4 class="ml-7 mr-3">Search: </h4>
                {{ form.search(class="form-control") }}
                {{ form.submit(class="btn btn-lg btn-block btn-primary ml-3 p-0") }}
            </div>
        </div>
    </div>
    </form>
<hr/>
    <div class="d-flex flex-row-reverse bd-highlight">
        <a class="btn btn-outline btn-info mb-3" href="{{ url_for('item_upload_page') }}">Create & Sell</a>
    </div>
<table class="table table-hover table-striped table-sm">
    <thead class="thead-dark">
    <tr>
        <!-- Your Columns HERE -->
{#        <th scope="col">Image</th>#}
        <th scope="col"><div class="ml-4">Image</div></th>
        <th scope="col">Name</th>
        <th scope="col">Price</th>
        <th scope="col">Rating</th>
        <th scope="col">Options</th>
    </tr>
    </thead>
    <tbody>
    <!-- Your rows inside the table HERE: -->
    {%  if items %}
    {% for item in items %}
        <tr>
{#            <td>{{ item.image }}</td>#}
            <td>
                <div class="ml-4">
                    <img src="../static/item_images/{{ item.images[0].name }}" alt='not found' width="170" height="100">
                </div>
            </td>
            <td><h5 class="mt-4">{{ item.name }}</h5></td>
            <td><h5 class="mt-4">{{ item.price }}$</h5></td>
            <td><h5 class="mt-4">{{ item.rating }}</h5></td>
            <td>
                <div class="mt-3">
                <a class="btn btn-outline btn-info mt-2 mb-2" href="{{ url_for('item_info_page', id=item.id) }}">More Info</a>
                <a class="btn btn-outline btn-success mt-2 mb-2" href="{{ url_for('item_sell_page', id=item.id) }}">Sell</a>
                    <a class="btn btn-outline btn-secondary mt-2 mb-2">Add to cart</a>

                </div>
            </td>
        </tr>
    {% endfor %}
    {% endif %}
    </tbody>
</table>
</div>
{% endblock %}